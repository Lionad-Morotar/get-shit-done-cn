# 需求模板

用于 `.planning/REQUIREMENTS.md` 的模板 — 定义"完成"的可检查需求。

<template>

```markdown
# 需求：[项目名称]

**定义于：** [日期]
**核心价值：** [来自 PROJECT.md]

## v1 需求

初始版本的需求。每个都映射到路线图阶段。

### 身份验证

- [ ] **AUTH-01**: 用户可以使用电子邮件和密码注册
- [ ] **AUTH-02**: 用户在注册后收到电子邮件验证
- [ ] **AUTH-03**: 用户可以通过电子邮件链接重置密码
- [ ] **AUTH-04**: 用户会话在浏览器刷新之间持久化

### [类别 2]

- [ ] **[CAT]-01**: [需求描述]
- [ ] **[CAT]-02**: [需求描述]
- [ ] **[CAT]-03**: [需求描述]

### [类别 3]

- [ ] **[CAT]-01**: [需求描述]
- [ ] **[CAT]-02**: [需求描述]

## v2 需求

推迟到未来版本。已跟踪但不在当前路线图中。

### [类别]

- **[CAT]-01**: [需求描述]
- **[CAT]-02**: [需求描述]

## 超出范围

明确排除。已记录以防止范围蔓延。

| 功能 | 原因 |
|---------|--------|
| [功能] | [为何排除] |
| [功能] | [为何排除] |

## 可追溯性

哪些阶段覆盖哪些需求。在路线图创建期间更新。

| 需求 | 阶段 | 状态 |
|-------------|-------|--------|
| AUTH-01 | 阶段 1 | 待定 |
| AUTH-02 | 阶段 1 | 待定 |
| AUTH-03 | 阶段 1 | 待定 |
| AUTH-04 | 阶段 1 | 待定 |
| [REQ-ID] | 阶段 [N] | 待定 |

**覆盖范围：**
- v1 需求：总计 [X]
- 映射到阶段：[Y]
- 未映射：[Z] ⚠️

---
*需求定义于：[日期]*
*最后更新：[日期]，在 [触发器] 之后*
```

</template>

<guidelines>

**需求格式：**
- ID：`[类别]-[编号]`（AUTH-01、CONTENT-02、SOCIAL-03）
- 描述：以用户为中心、可测试、原子性
- 复选框：仅用于 v1 需求（v2 尚不可操作）

**类别：**
- 从研究 FEATURES.md 类别派生
- 保持与域约定一致
- 典型：身份验证、内容、社交、通知、审核、支付、管理

**v1 vs v2：**
- v1：承诺的范围，将在路线图阶段中
- v2：已确认但推迟，不在当前路线图中
- 移动 v2 → v1 需要路线图更新

**超出范围：**
- 带有推理的明确排除
- 防止以后出现"为什么你没有包括 X？"
- 研究中的反功能属于此处并带有警告

**可追溯性：**
- 初始为空，在路线图创建期间填充
- 每个需求恰好映射到一个阶段
- 未映射的需求 = 路线图差距

**状态值：**
- 待定：未开始
- 进行中：阶段处于活动状态
- 完成：需求已验证
- 阻塞：等待外部因素

</guidelines>

<evolution>

**每个阶段完成后：**
1. 将覆盖的需求标记为完成
2. 更新可追溯性状态
3. 注意任何更改范围的需求

**路线图更新后：**
1. 验证所有 v1 需求仍然映射
2. 如果范围扩大，添加新需求
3. 如果范围缩小，将需求移动到 v2/超出范围

**需求完成标准：**
- 需求在以下情况下"完成"：
  - 功能已实施
  - 功能已验证（测试通过、手动检查完成）
  - 功能已提交

</evolution>

<example>

```markdown
# 需求：CommunityApp

**定义于：** 2025-01-14
**核心价值：** 用户可以与志同道合的人分享和讨论内容

## v1 需求

### 身份验证

- [ ] **AUTH-01**: 用户可以使用电子邮件和密码注册
- [ ] **AUTH-02**: 用户在注册后收到电子邮件验证
- [ ] **AUTH-03**: 用户可以通过电子邮件链接重置密码
- [ ] **AUTH-04**: 用户会话在浏览器刷新之间持久化

### 个人资料

- [ ] **PROF-01**: 用户可以创建带有显示名称的个人资料
- [ ] **PROF-02**: 用户可以上传头像图像
- [ ] **PROF-03**: 用户可以编写简介（最多 500 个字符）
- [ ] **PROF-04**: 用户可以查看其他用户的个人资料

### 内容

- [ ] **CONT-01**: 用户可以创建文本帖子
- [ ] **CONT-02**: 用户可以上传带有帖子的图像
- [ ] **CONT-03**: 用户可以编辑自己的帖子
- [ ] **CONT-04**: 用户可以删除自己的帖子
- [ ] **CONT-05**: 用户可以查看帖子信息流

### 社交

- [ ] **SOCL-01**: 用户可以关注其他用户
- [ ] **SOCL-02**: 用户可以取消关注用户
- [ ] **SOCL-03**: 用户可以点赞帖子
- [ ] **SOCL-04**: 用户可以评论帖子
- [ ] **SOCL-05**: 用户可以查看活动信息流（关注用户的帖子）

## v2 需求

### 通知

- **NOTF-01**: 用户接收应用内通知
- **NOTF-02**: 用户收到新关注者的电子邮件
- **NOTF-03**: 用户收到自己帖子评论的电子邮件
- **NOTF-04**: 用户可以配置通知首选项

### 审核

- **MODR-01**: 用户可以举报内容
- **MODR-02**: 用户可以阻止其他用户
- **MODR-03**: 管理员可以查看举报的内容
- **MODR-04**: 管理员可以删除内容
- **MODR-05**: 管理员可以封禁用户

## 超出范围

| 功能 | 原因 |
|---------|--------|
| 实时聊天 | 高复杂性，不是社区价值的核心 |
| 视频帖子 | 存储/带宽成本，推迟到 v2+ |
| OAuth 登录 | 电子邮件/密码对 v1 来说足够 |
| 移动应用 | Web 优先，稍后移动 |

## 可追溯性

| 需求 | 阶段 | 状态 |
|-------------|-------|--------|
| AUTH-01 | 阶段 1 | 待定 |
| AUTH-02 | 阶段 1 | 待定 |
| AUTH-03 | 阶段 1 | 待定 |
| AUTH-04 | 阶段 1 | 待定 |
| PROF-01 | 阶段 2 | 待定 |
| PROF-02 | 阶段 2 | 待定 |
| PROF-03 | 阶段 2 | 待定 |
| PROF-04 | 阶段 2 | 待定 |
| CONT-01 | 阶段 3 | 待定 |
| CONT-02 | 阶段 3 | 待定 |
| CONT-03 | 阶段 3 | 待定 |
| CONT-04 | 阶段 3 | 待定 |
| CONT-05 | 阶段 3 | 待定 |
| SOCL-01 | 阶段 4 | 待定 |
| SOCL-02 | 阶段 4 | 待定 |
| SOCL-03 | 阶段 4 | 待定 |
| SOCL-04 | 阶段 4 | 待定 |
| SOCL-05 | 阶段 4 | 待定 |

**覆盖范围：**
- v1 需求：总计 18
- 映射到阶段：18
- 未映射：0 ✓

---
*需求定义于：2025-01-14*
*最后更新：2025-01-14，在初始定义之后*
```

</example>
