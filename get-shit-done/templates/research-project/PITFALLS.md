# 陷阱研究模板

用于 `.planning/research/PITFALLS.md` 的模板 — 项目领域要避免的常见错误。

<template>

```markdown
# 陷阱研究

**领域：** [领域类型]
**研究时间：** [日期]
**置信度：** [高/中/低]

## 关键陷阱

### 陷阱 1：[名称]

**出了什么问题：**
[失败模式的描述]

**为何发生：**
[根本原因 — 为何开发人员犯此错误]

**如何避免：**
[具体的预防策略]

**警告信号：**
[如何在成为问题之前早期检测]

**处理阶段：**
[哪个路线图阶段应该预防此问题]

---

### 陷阱 2：[名称]

**出了什么问题：**
[失败模式的描述]

**为何发生：**
[根本原因 — 为何开发人员犯此错误]

**如何避免：**
[具体的预防策略]

**警告信号：**
[如何在成为问题之前早期检测]

**处理阶段：**
[哪个路线图阶段应该预防此问题]

---

### 陷阱 3：[名称]

**出了什么问题：**
[失败模式的描述]

**为何发生：**
[根本原因 — 为何开发人员犯此错误]

**如何避免：**
[具体的预防策略]

**警告信号：**
[如何在成为问题之前早期检测]

**处理阶段：**
[哪个路线图阶段应该预防此问题]

---

[继续所有关键陷阱...]

## 技术债务模式

看起来合理但会产生长期问题的捷径。

| 捷径 | 立即利益 | 长期成本 | 何时可接受 |
|----------|-------------------|----------------|-----------------|
| [捷径] | [利益] | [成本] | [条件，或"永不"] |
| [捷径] | [利益] | [成本] | [条件，或"永不"] |
| [捷径] | [利益] | [成本] | [条件，或"永不"] |

## 集成陷阱

连接到外部服务时的常见错误。

| 集成 | 常见错误 | 正确方法 |
|-------------|----------------|------------------|
| [服务] | [人们做错了什么] | [改为做什么] |
| [服务] | [人们做错了什么] | [改为做什么] |
| [服务] | [人们做错了什么] | [改为做什么] |

## 性能陷阱

小规模下有效但随着使用增长而失败的模式。

| 陷阱 | 症状 | 预防 | 何时崩溃 |
|------|----------|------------|----------------|
| [陷阱] | [如何注意] | [如何避免] | [规模阈值] |
| [陷阱] | [如何注意] | [如何避免] | [规模阈值] |
| [陷阱] | [如何注意] | [如何避免] | [规模阈值] |

## 安全错误

超出一般 Web 安全的特定领域安全问题。

| 错误 | 风险 | 预防 |
|---------|------|------------|
| [错误] | [可能发生什么] | [如何避免] |
| [错误] | [可能发生什么] | [如何避免] |
| [错误] | [可能发生什么] | [如何避免] |

## UX 陷阱

此领域中常见的用户体验错误。

| 陷阱 | 用户影响 | 更好的方法 |
|---------|-------------|-----------------|
| [陷阱] | [用户如何受苦] | [改为做什么] |
| [陷阱] | [用户如何受苦] | [改为做什么] |
| [陷阱] | [用户如何受苦] | [改为做什么] |

## "看起来完成但实际没有"检查清单

看起来完成但缺少关键部分的事情。

- [ ] **[功能]：** 经常缺少[东西] — 验证[检查]
- [ ] **[功能]：** 经常缺少[东西] — 验证[检查]
- [ ] **[功能]：** 经常缺少[东西] — 验证[检查]
- [ ] **[功能]：** 经常缺少[东西] — 验证[检查]

## 恢复策略

尽管预防但陷阱发生时，如何恢复。

| 陷阱 | 恢复成本 | 恢复步骤 |
|---------|---------------|----------------|
| [陷阱] | 低/中/高 | [做什么] |
| [陷阱] | 低/中/高 | [做什么] |
| [陷阱] | 低/中/高 | [做什么] |

## 陷阱到阶段映射

路线图阶段应如何解决这些陷阱。

| 陷阱 | 预防阶段 | 验证 |
|---------|------------------|--------------|
| [陷阱] | 阶段 [X] | [如何验证预防有效] |
| [陷阱] | 阶段 [X] | [如何验证预防有效] |
| [陷阱] | 阶段 [X] | [如何验证预防有效] |

## 来源

- [参考的事后分析]
- [社区讨论]
- [官方"陷阱"文档]
- [个人经验 / 已知问题]

---
*陷阱研究用于：[领域]*
*研究时间：[日期]*
```

</template>

<guidelines>

**关键陷阱：**
- 专注于特定领域的问题，而不是一般性错误
- 包括警告信号 — 早期检测可防止灾难
- 链接到特定阶段 — 使陷阱可操作

**技术债务：**
- 现实一点 — 一些捷径是可以接受的
- 注意捷径何时是"永不接受"与"仅在 MVP 中"
- 包括长期成本以告知权衡决策

**性能陷阱：**
- 包括规模阈值（"在 1 万用户时崩溃"）
- 专注于与此项目预期规模相关的内容
- 不要为假设的规模过度设计

**安全错误：**
- 超越 OWASP 基础 — 特定领域的问题
- 示例：社区平台与电子商务有不同的安全关注点
- 包括风险级别以进行优先级排序

**"看起来完成但实际没有"：**
- 执行期间验证的检查清单格式
- 在演示与生产中常见
- 防止"在我的机器上工作"的问题

**陷阱到阶段映射：**
- 对路线图创建至关重要
- 每个陷阱应映射到预防它的阶段
- 通知阶段排序和成功标准

</guidelines>
