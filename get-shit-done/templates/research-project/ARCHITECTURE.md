# 架构研究模板

用于 `.planning/research/ARCHITECTURE.md` 的模板 — 项目领域的系统结构模式。

<template>

```markdown
# 架构研究

**领域：** [领域类型]
**研究时间：** [日期]
**置信度：** [高/中/低]

## 标准架构

### 系统概览

```
┌─────────────────────────────────────────────────────────────┐
│                        [层名称]                          │
├─────────────────────────────────────────────────────────────┤
│  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐        │
│  │ [组件]  │  │ [组件]  │  │ [组件]  │  │ [组件]  │        │
│  └────┬────┘  └────┬────┘  └────┬────┘  └────┬────┘        │
│       │            │            │            │              │
├───────┴────────────┴────────────┴────────────┴──────────────┤
│                        [层名称]                          │
├─────────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────────┐    │
│  │                    [组件]                       │    │
│  └─────────────────────────────────────────────────────┘    │
├─────────────────────────────────────────────────────────────┤
│                        [层名称]                          │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐                   │
│  │ [存储]  │  │ [存储]  │  │ [存储]  │                   │
│  └──────────┘  └──────────┘  └──────────┘                   │
└─────────────────────────────────────────────────────────────┘
```

### 组件职责

| 组件 | 职责 | 典型实现 |
|-----------|----------------|------------------------|
| [名称] | [拥有什么] | [通常如何构建] |
| [名称] | [拥有什么] | [通常如何构建] |
| [名称] | [拥有什么] | [通常如何构建] |

## 推荐的项目结构

```
src/
├── [文件夹]/           # [目的]
│   ├── [子文件夹]/    # [目的]
│   └── [文件].ts       # [目的]
├── [文件夹]/           # [目的]
│   ├── [子文件夹]/    # [目的]
│   └── [文件].ts       # [目的]
├── [文件夹]/           # [目的]
└── [文件夹]/           # [目的]
```

### 结构理由

- **[文件夹]/:** [为何这样组织]
- **[文件夹]/:** [为何这样组织]

## 架构模式

### 模式 1：[模式名称]

**什么：** [描述]
**何时使用：** [条件]
**权衡：** [利弊]

**示例：**
```typescript
// [展示模式的简短代码示例]
```

### 模式 2：[模式名称]

**什么：** [描述]
**何时使用：** [条件]
**权衡：** [利弊]

**示例：**
```typescript
// [展示模式的简短代码示例]
```

### 模式 3：[模式名称]

**什么：** [描述]
**何时使用：** [条件]
**权衡：** [利弊]

## 数据流

### 请求流

```
[用户操作]
    ↓
[组件] → [处理器] → [服务] → [数据存储]
    ↓              ↓           ↓            ↓
[响应] ← [转换] ← [查询] ← [数据库]
```

### 状态管理

```
[状态存储]
    ↓ (订阅)
[组件] ←→ [操作] → [Reducer/变更] → [状态存储]
```

### 关键数据流

1. **[流名称]：** [描述数据如何移动]
2. **[流名称]：** [描述数据如何移动]

## 扩展性考虑

| 规模 | 架构调整 |
|-------|--------------------------|
| 0-1k 用户 | [方法 — 通常单体即可] |
| 1k-100k 用户 | [方法 — 首先优化什么] |
| 100k+ 用户 | [方法 — 何时考虑拆分] |

### 扩展优先级

1. **首个瓶颈：** [首先什么会崩溃，如何修复]
2. **第二个瓶颈：** [接下来什么会崩溃，如何修复]

## 反模式

### 反模式 1：[名称]

**人们做什么：** [错误]
**为何错误：** [导致的问题]
**改为这样做：** [正确方法]

### 反模式 2：[名称]

**人们做什么：** [错误]
**为何错误：** [导致的问题]
**改为这样做：** [正确方法]

## 集成点

### 外部服务

| 服务 | 集成模式 | 注意事项 |
|---------|---------------------|-------|
| [服务] | [如何连接] | [陷阱] |
| [服务] | [如何连接] | [陷阱] |

### 内部边界

| 边界 | 通信 | 注意事项 |
|----------|---------------|-------|
| [模块 A ↔ 模块 B] | [API/事件/直接] | [考虑因素] |

## 来源

- [架构参考]
- [官方文档]
- [案例研究]

---
*架构研究用于：[领域]*
*研究时间：[日期]*
```

</template>

<guidelines>

**系统概览：**
- 使用 ASCII 框线图以提高清晰度（├── └── │ ─ 仅用于结构可视化）
- 显示主要组件及其关系
- 不要过度详细 — 这是概念性的，不是实现

**项目结构：**
- 具体说明文件夹组织
- 解释分组的理由
- 匹配所选技术栈的约定

**模式：**
- 在有帮助的地方包括代码示例
- 诚实地解释权衡
- 注意模式何时对小项目来说过于复杂

**扩展性考虑：**
- 现实一点 — 大多数项目不需要扩展到数百万
- 专注于"首先什么会崩溃"而不是理论限制
- 避免过早优化建议

**反模式：**
- 特定于此领域
- 包括改为做什么
- 有助于在实施期间防止常见错误

</guidelines>
